<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="theme-color" content="#007bff">
    <title>NearSnap - –í–∏–¥–µ–æ—á–∞—Ç –¥–ª—è –≥–µ–π–º–µ—Ä–æ–≤</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="icon" href="images/nearsap-logo.svg" type="image/svg+xml">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><defs><linearGradient id='g' x1='0%25' y1='0%25' x2='100%25' y2='100%25'><stop offset='0%25' style='stop-color:%2300D4FF'/><stop offset='50%25' style='stop-color:%235B73FF'/><stop offset='100%25' style='stop-color:%239C27B0'/></linearGradient></defs><path d='M20 25 C20 15, 30 5, 45 5 L70 5 C85 5, 95 15, 95 25 L95 50 C95 60, 85 70, 70 70 L45 70 C35 70, 25 60, 25 50 L25 35 C25 30, 30 25, 35 25 L20 25 Z' fill='url(%23g)'/></svg>" type="image/svg+xml">
</head>
<body class="theme-default">
    <!-- –≠–∫—Ä–∞–Ω –≤—Ö–æ–¥–∞ -->
    <div id="loginScreen" class="screen active">
        <div class="login-container">
            <div class="logo">
                <div class="logo-container">
                    <img src="images/nearsap-logo.svg" alt="NearSap" class="logo-image">
                    <h1>NearSap</h1>
                </div>
                <p>–í–∏–¥–µ–æ—á–∞—Ç –¥–ª—è –≥–µ–π–º–µ—Ä–æ–≤</p>
            </div>
            
            <div class="login-form">
                <input type="text" id="nicknameInput" placeholder="–í–≤–µ–¥–∏—Ç–µ –≤–∞—à –Ω–∏–∫–Ω–µ–π–º" maxlength="20" required>
                <input type="text" id="roomIdInput" placeholder="ID –∫–æ–º–Ω–∞—Ç—ã (–æ—Å—Ç–∞–≤—å—Ç–µ –ø—É—Å—Ç—ã–º –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –Ω–æ–≤–æ–π)" maxlength="50">
                <button id="joinBtn" class="btn-primary" disabled>–ü—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å—Å—è</button>
            </div>
            
            <div class="theme-selector">
                <label>–¢–µ–º–∞:</label>
                <select id="themeSelect">
                    <option value="theme-default">–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é</option>
                    <option value="theme-dark">–¢–µ–º–Ω–∞—è</option>
                    <option value="theme-gaming">–ò–≥—Ä–æ–≤–∞—è</option>
                    <option value="theme-neon">–ù–µ–æ–Ω</option>
                </select>
            </div>
        </div>
    </div>

    <!-- –û—Å–Ω–æ–≤–Ω–æ–π —ç–∫—Ä–∞–Ω –≤–∏–¥–µ–æ—á–∞—Ç–∞ -->
    <div id="videoScreen" class="screen">
        <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ –∫–æ–º–Ω–∞—Ç–µ -->
        <div class="header">
            <div class="room-info">
                <div class="header-logo">
                    <img src="images/nearsap-logo.svg" alt="NearSap" class="header-logo-image">
                </div>
                <div class="room-details">
                    <span id="roomIdDisplay">–ö–æ–º–Ω–∞—Ç–∞: </span>
                    <span id="hostIndicator"></span>
                </div>
                <div id="networkStatus" class="network-status" title="–°–æ—Å—Ç–æ—è–Ω–∏–µ —Å–µ—Ç–∏">
                    <span class="network-icon">üì∂</span>
                    <span class="network-text">–ü—Ä–æ–≤–µ—Ä–∫–∞...</span>
                </div>
            </div>
            <div class="header-controls">
                <!-- –ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å —Ä–µ–∂–∏–º–æ–≤ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è -->
                <div class="layout-switcher">
                    <button id="gridViewBtn" class="layout-btn active" title="–°–µ—Ç–∫–∞">
                        <span class="layout-icon">‚äû</span>
                    </button>
                    <button id="speakerViewBtn" class="layout-btn" title="–†–µ–∂–∏–º –¥–æ–∫–ª–∞–¥—á–∏–∫–∞">
                        <span class="layout-icon">‚ä°</span>
                    </button>
                    <button id="fullscreenBtn" class="layout-btn" title="–ü–æ–ª–Ω—ã–π —ç–∫—Ä–∞–Ω">
                        <span class="layout-icon">‚õ∂</span>
                    </button>
                </div>
                <button id="themeToggle" class="btn-icon" title="–°–º–µ–Ω–∏—Ç—å —Ç–µ–º—É">üé®</button>
                <button id="settingsBtn" class="btn-icon" title="–ù–∞—Å—Ç—Ä–æ–π–∫–∏">‚öôÔ∏è</button>
                <button id="leaveBtn" class="btn-danger">–ü–æ–∫–∏–Ω—É—Ç—å</button>
            </div>
        </div>

        <!-- –û—Å–Ω–æ–≤–Ω–∞—è –æ–±–ª–∞—Å—Ç—å —Å –≤–∏–¥–µ–æ -->
        <div class="main-content">
            <!-- –°–µ—Ç–∫–∞ –≤–∏–¥–µ–æ -->
            <div class="video-container">
                <!-- –†–µ–∂–∏–º —Å–µ—Ç–∫–∏ -->
                <div id="videoGrid" class="video-grid grid-view">
                    <!-- –õ–æ–∫–∞–ª—å–Ω–æ–µ –≤–∏–¥–µ–æ -->
                    <div class="video-wrapper local-video" id="localVideoWrapper">
                        <video id="localVideo" autoplay muted playsinline></video>
                        <div class="video-overlay">
                            <span class="nickname">–í—ã</span>
                            <div class="video-controls">
                                <button id="muteBtn" class="control-btn">üé§</button>
                                <button id="videoBtn" class="control-btn">üìπ</button>
                            </div>
                        </div>
                        <!-- –ü–æ–ª–∑—É–Ω–æ–∫ –≥—Ä–æ–º–∫–æ—Å—Ç–∏ (–ø–æ—è–≤–ª—è–µ—Ç—Å—è –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏) -->
                        <div class="volume-control">
                            <input type="range" class="volume-slider" min="0" max="200" value="100">
                            <span class="volume-label">100%</span>
                        </div>
                    </div>
                </div>
                
                <!-- –†–µ–∂–∏–º –¥–æ–∫–ª–∞–¥—á–∏–∫–∞ -->
                <div id="speakerView" class="speaker-view" style="display: none;">
                    <div class="main-speaker">
                        <div id="mainSpeakerVideo" class="main-video-wrapper">
                            <!-- –û—Å–Ω–æ–≤–Ω–æ–µ –≤–∏–¥–µ–æ –±—É–¥–µ—Ç –∫–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–æ —Å—é–¥–∞ -->
                        </div>
                    </div>
                    <div class="participants-strip">
                        <div id="participantsThumbnails" class="thumbnails-container">
                            <!-- –ú–∏–Ω–∏–∞—Ç—é—Ä—ã —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ -->
                        </div>
                    </div>
                </div>
            </div>

            <!-- –ë–æ–∫–æ–≤–∞—è –ø–∞–Ω–µ–ª—å —Å —á–∞—Ç–æ–º -->
            <div class="sidebar">
                <div class="chat-container">
                    <div class="chat-header">
                        <h3>–ß–∞—Ç</h3>
                        <button id="toggleChat" class="btn-icon">üí¨</button>
                    </div>
                    <div id="chatMessages" class="chat-messages"></div>
                    <div class="chat-input">
                        <input type="text" id="messageInput" placeholder="–í–≤–µ–¥–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ..." maxlength="500">
                        <button id="sendBtn" class="btn-primary">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
                    </div>
                </div>

                <!-- –°–ø–∏—Å–æ–∫ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ -->
                <div class="participants-container">
                    <div class="participants-header">
                        <h3>–£—á–∞—Å—Ç–Ω–∏–∫–∏</h3>
                        <span id="participantCount">0</span>
                    </div>
                    <div id="participantsList" class="participants-list"></div>
                </div>
            </div>
        </div>

        <!-- –ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è -->
        <div class="controls-panel">
            <div class="controls-group">
                <button id="micToggle" class="control-btn" title="–ú–∏–∫—Ä–æ—Ñ–æ–Ω (Ctrl+M)">
                    <span class="icon">üé§</span>
                    <span class="label">–ú–∏–∫—Ä–æ—Ñ–æ–Ω</span>
                </button>
                <button id="cameraToggle" class="control-btn" title="–ö–∞–º–µ—Ä–∞ (Ctrl+V)">
                    <span class="icon">üìπ</span>
                    <span class="label">–ö–∞–º–µ—Ä–∞</span>
                </button>
                <button id="screenShare" class="control-btn" title="–î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è —ç–∫—Ä–∞–Ω–∞ (Ctrl+S)">
                    <span class="icon">üñ•Ô∏è</span>
                    <span class="label">–≠–∫—Ä–∞–Ω</span>
                </button>
                <button id="fullscreenToggle" class="control-btn" title="–ü–æ–ª–Ω—ã–π —ç–∫—Ä–∞–Ω (F11)">
                    <span class="icon">‚õ∂</span>
                    <span class="label">–ü–æ–ª–Ω—ã–π —ç–∫—Ä–∞–Ω</span>
                </button>
                <button id="settingsToggle" class="control-btn" title="–ù–∞—Å—Ç—Ä–æ–π–∫–∏">
                    <span class="icon">‚öôÔ∏è</span>
                    <span class="label">–ù–∞—Å—Ç—Ä–æ–π–∫–∏</span>
                </button>
            </div>
            
            <!-- –ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å (–ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ —Ö–æ—Å—Ç—É) -->
            <div id="adminPanel" class="admin-panel" style="display: none;">
                <h4>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–º–Ω–∞—Ç–æ–π</h4>
                <div class="admin-controls">
                    <button id="muteAllBtn" class="btn-warning">–ó–∞–≥–ª—É—à–∏—Ç—å –≤—Å–µ—Ö</button>
                    <button id="roomLockBtn" class="btn-secondary">–ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –∫–æ–º–Ω–∞—Ç—É</button>
                    <button id="nudgeAllBtn" class="btn-info">–ü–æ—Å—Ç—É—á–∞—Ç—å –≤—Å–µ–º</button>
                </div>
            </div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞ -->
    <div id="settingsModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏</h3>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <div class="settings-tabs">
                    <button class="tab-btn active" data-tab="devices">–£—Å—Ç—Ä–æ–π—Å—Ç–≤–∞</button>
                    <button class="tab-btn" data-tab="quality">–ö–∞—á–µ—Å—Ç–≤–æ</button>
                    <button class="tab-btn" data-tab="audio">–ó–≤—É–∫</button>
                    <button class="tab-btn" data-tab="appearance">–í–Ω–µ—à–Ω–∏–π –≤–∏–¥</button>
                </div>
                
                <div class="tab-content">
                    <!-- –í–∫–ª–∞–¥–∫–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤ -->
                    <div id="devices-tab" class="tab-panel active">
                        <div class="setting-group">
                            <label>üìπ –ö–∞–º–µ—Ä–∞:</label>
                            <select id="cameraSelect">
                                <option value="">–ó–∞–≥—Ä—É–∑–∫–∞...</option>
                            </select>
                        </div>
                        <div class="setting-group">
                            <label>üé§ –ú–∏–∫—Ä–æ—Ñ–æ–Ω:</label>
                            <select id="microphoneSelect">
                                <option value="">–ó–∞–≥—Ä—É–∑–∫–∞...</option>
                            </select>
                        </div>
                        <div class="setting-group">
                            <label>üîä –î–∏–Ω–∞–º–∏–∫–∏:</label>
                            <select id="speakerSelect">
                                <option value="">–ó–∞–≥—Ä—É–∑–∫–∞...</option>
                            </select>
                        </div>
                    </div>
                    
                    <!-- –í–∫–ª–∞–¥–∫–∞ –∫–∞—á–µ—Å—Ç–≤–∞ -->
                    <div id="quality-tab" class="tab-panel">
                        <div class="setting-group">
                            <label>üì∫ –†–∞–∑—Ä–µ—à–µ–Ω–∏–µ –≤–∏–¥–µ–æ:</label>
                            <select id="videoQuality">
                                <option value="1080p">Full HD (1080p)</option>
                                <option value="720p" selected>HD (720p)</option>
                                <option value="480p">SD (480p)</option>
                                <option value="360p">Low (360p)</option>
                            </select>
                        </div>
                        <div class="setting-group">
                            <label>üéûÔ∏è –ß–∞—Å—Ç–æ—Ç–∞ –∫–∞–¥—Ä–æ–≤:</label>
                            <select id="frameRate">
                                <option value="60">60 FPS</option>
                                <option value="30" selected>30 FPS</option>
                                <option value="15">15 FPS</option>
                            </select>
                        </div>
                        <div class="setting-group">
                            <label>üìä –ë–∏—Ç—Ä–µ–π—Ç:</label>
                            <select id="bitrate">
                                <option value="high">–í—ã—Å–æ–∫–∏–π</option>
                                <option value="medium" selected>–°—Ä–µ–¥–Ω–∏–π</option>
                                <option value="low">–ù–∏–∑–∫–∏–π</option>
                            </select>
                        </div>
                    </div>
                    
                    <!-- –í–∫–ª–∞–¥–∫–∞ –∑–≤—É–∫–∞ -->
                    <div id="audio-tab" class="tab-panel">
                        <div class="setting-group">
                            <label>üîá –ü–æ–¥–∞–≤–ª–µ–Ω–∏–µ —à—É–º–∞:</label>
                            <input type="checkbox" id="noiseSuppression" checked>
                            <span class="checkbox-label">–í–∫–ª—é—á–µ–Ω–æ</span>
                        </div>
                        <div class="setting-group">
                            <label>üì¢ –ü–æ–¥–∞–≤–ª–µ–Ω–∏–µ —ç—Ö–∞:</label>
                            <input type="checkbox" id="echoCancellation" checked>
                            <span class="checkbox-label">–í–∫–ª—é—á–µ–Ω–æ</span>
                        </div>
                        <div class="setting-group">
                            <label>üéöÔ∏è –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Ä–µ–≥—É–ª–∏—Ä–æ–≤–∫–∞ –≥—Ä–æ–º–∫–æ—Å—Ç–∏:</label>
                            <input type="checkbox" id="autoGainControl" checked>
                            <span class="checkbox-label">–í–∫–ª—é—á–µ–Ω–æ</span>
                        </div>
                        <div class="setting-group">
                            <label>üîä –ì—Ä–æ–º–∫–æ—Å—Ç—å –∑–≤—É–∫–æ–≤—ã—Ö —ç—Ñ—Ñ–µ–∫—Ç–æ–≤:</label>
                            <input type="range" id="soundVolume" min="0" max="100" value="50">
                            <span id="soundVolumeValue">50%</span>
                        </div>
                        <div class="setting-group">
                            <label>üîî –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –±—Ä–∞—É–∑–µ—Ä–∞:</label>
                            <input type="checkbox" id="browserNotifications">
                            <span class="checkbox-label">–í–∫–ª—é—á–µ–Ω–æ</span>
                            <button id="requestNotificationPermission" class="btn-secondary btn-small">–†–∞–∑—Ä–µ—à–∏—Ç—å</button>
                        </div>
                    </div>
                    
                    <!-- –í–∫–ª–∞–¥–∫–∞ –≤–Ω–µ—à–Ω–µ–≥–æ –≤–∏–¥–∞ -->
                    <div id="appearance-tab" class="tab-panel">
                        <div class="setting-group">
                            <label>üîç –ú–∞—Å—à—Ç–∞–± –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞:</label>
                            <select id="uiScale">
                                <option value="0.8">–ú–µ–ª–∫–∏–π (80%)</option>
                                <option value="1.0" selected>–û–±—ã—á–Ω—ã–π (100%)</option>
                                <option value="1.2">–ö—Ä—É–ø–Ω—ã–π (120%)</option>
                                <option value="1.4">–û—á–µ–Ω—å –∫—Ä—É–ø–Ω—ã–π (140%)</option>
                            </select>
                        </div>
                        <div class="setting-group">
                            <label>üñºÔ∏è –í–∏—Ä—Ç—É–∞–ª—å–Ω—ã–π —Ñ–æ–Ω:</label>
                            <select id="virtualBackground">
                                <option value="none">–ë–µ–∑ —Ñ–æ–Ω–∞</option>
                                <option value="blur">–†–∞–∑–º—ã—Ç–∏–µ</option>
                                <option value="office">–û—Ñ–∏—Å</option>
                                <option value="nature">–ü—Ä–∏—Ä–æ–¥–∞</option>
                                <option value="space">–ö–æ—Å–º–æ—Å</option>
                                <option value="custom">–ó–∞–≥—Ä—É–∑–∏—Ç—å —Å–≤–æ–π</option>
                            </select>
                            <input type="file" id="customBackground" accept="image/*" style="display: none;">
                        </div>
                        <div class="setting-group">
                            <label>üé® –¶–≤–µ—Ç–æ–≤–∞—è —Å—Ö–µ–º–∞:</label>
                            <select id="colorScheme">
                                <option value="auto">–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏</option>
                                <option value="light">–°–≤–µ—Ç–ª–∞—è</option>
                                <option value="dark">–¢–µ–º–Ω–∞—è</option>
                            </select>
                        </div>
                        <div class="setting-group">
                            <label>üì± –ö–æ–º–ø–∞–∫—Ç–Ω—ã–π —Ä–µ–∂–∏–º:</label>
                            <input type="checkbox" id="compactMode">
                            <span class="checkbox-label">–í–∫–ª—é—á–µ–Ω</span>
                        </div>
                        <div class="setting-group">
                            <label>üé≠ –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –∞–≤–∞—Ç–∞—Ä—ã:</label>
                            <input type="checkbox" id="showAvatars" checked>
                            <span class="checkbox-label">–í–∫–ª—é—á–µ–Ω–æ</span>
                        </div>
                    </div>
                </div>
                
                <div class="modal-footer">
                    <button id="resetSettings" class="btn-secondary">–°–±—Ä–æ—Å–∏—Ç—å</button>
                    <button id="applySettings" class="btn-primary">–ü—Ä–∏–º–µ–Ω–∏—Ç—å</button>
                </div>
            </div>
        </div>
    </div>

    <!-- –ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ–µ –º–µ–Ω—é —É—á–∞—Å—Ç–Ω–∏–∫–∞ -->
    <div id="participantContextMenu" class="context-menu">
        <div class="context-menu-item" data-action="kick">
            <span class="menu-icon">‚ùå</span>
            <span class="menu-text">–ò—Å–∫–ª—é—á–∏—Ç—å</span>
        </div>
        <div class="context-menu-item" data-action="mute-local">
            <span class="menu-icon">üîá</span>
            <span class="menu-text">–ó–∞–≥–ª—É—à–∏—Ç—å –ª–æ–∫–∞–ª—å–Ω–æ</span>
        </div>
        <div class="context-menu-item" data-action="private-message">
            <span class="menu-icon">üí¨</span>
            <span class="menu-text">–õ–∏—á–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ</span>
        </div>
    </div>

    <!-- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è -->
    <div id="notifications" class="notifications"></div>

    <!-- –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ Socket.IO –∏ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ —Å–∫—Ä–∏–ø—Ç–∞ -->
    <script src="/socket.io/socket.io.js"></script>
    <script src="js/utils.js"></script>
    <script type="module" src="js/main.js"></script>
</body>
</html>