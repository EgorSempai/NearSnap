<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Settings - NearSap</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        .test-section { margin: 20px 0; padding: 15px; border: 1px solid #ccc; border-radius: 5px; }
        .success { background-color: #d4edda; border-color: #c3e6cb; }
        .error { background-color: #f8d7da; border-color: #f5c6cb; }
        button { padding: 10px 15px; margin: 5px; cursor: pointer; }
        .log { background: #f8f9fa; padding: 10px; margin: 10px 0; border-radius: 3px; font-family: monospace; }
    </style>
</head>
<body>
    <h1>üß™ –¢–µ—Å—Ç –Ω–∞—Å—Ç—Ä–æ–µ–∫ NearSap</h1>
    
    <div class="test-section">
        <h3>1. –¢–µ—Å—Ç –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –≤–∫–ª–∞–¥–æ–∫</h3>
        <div class="settings-tabs">
            <button class="tab-btn active" data-tab="devices">–£—Å—Ç—Ä–æ–π—Å—Ç–≤–∞</button>
            <button class="tab-btn" data-tab="quality">–ö–∞—á–µ—Å—Ç–≤–æ</button>
            <button class="tab-btn" data-tab="audio">–ó–≤—É–∫</button>
            <button class="tab-btn" data-tab="appearance">–í–Ω–µ—à–Ω–∏–π –≤–∏–¥</button>
        </div>
        <div class="tab-content">
            <div id="devices-tab" class="tab-panel active">–°–æ–¥–µ—Ä–∂–∏–º–æ–µ –≤–∫–ª–∞–¥–∫–∏ –£—Å—Ç—Ä–æ–π—Å—Ç–≤–∞</div>
            <div id="quality-tab" class="tab-panel">–°–æ–¥–µ—Ä–∂–∏–º–æ–µ –≤–∫–ª–∞–¥–∫–∏ –ö–∞—á–µ—Å—Ç–≤–æ</div>
            <div id="audio-tab" class="tab-panel">–°–æ–¥–µ—Ä–∂–∏–º–æ–µ –≤–∫–ª–∞–¥–∫–∏ –ó–≤—É–∫</div>
            <div id="appearance-tab" class="tab-panel">–°–æ–¥–µ—Ä–∂–∏–º–æ–µ –≤–∫–ª–∞–¥–∫–∏ –í–Ω–µ—à–Ω–∏–π –≤–∏–¥</div>
        </div>
        <div id="tab-test-result" class="log">–†–µ–∑—É–ª—å—Ç–∞—Ç —Ç–µ—Å—Ç–∞ –ø–æ—è–≤–∏—Ç—Å—è –∑–¥–µ—Å—å...</div>
    </div>

    <div class="test-section">
        <h3>2. –¢–µ—Å—Ç –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è</h3>
        <select id="uiScale">
            <option value="0.8">–ú–µ–ª–∫–∏–π (80%)</option>
            <option value="1.0" selected>–û–±—ã—á–Ω—ã–π (100%)</option>
            <option value="1.2">–ö—Ä—É–ø–Ω—ã–π (120%)</option>
            <option value="1.4">–û—á–µ–Ω—å –∫—Ä—É–ø–Ω—ã–π (140%)</option>
        </select>
        <button onclick="testUIScale()">–ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∞—Å—à—Ç–∞–±</button>
        <div id="scale-test-result" class="log">–†–µ–∑—É–ª—å—Ç–∞—Ç —Ç–µ—Å—Ç–∞ –ø–æ—è–≤–∏—Ç—Å—è –∑–¥–µ—Å—å...</div>
    </div>

    <div class="test-section">
        <h3>3. –¢–µ—Å—Ç –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ —Ñ–æ–Ω–∞</h3>
        <select id="virtualBackground">
            <option value="none">–ë–µ–∑ —Ñ–æ–Ω–∞</option>
            <option value="blur">–†–∞–∑–º—ã—Ç–∏–µ</option>
            <option value="office">–û—Ñ–∏—Å</option>
            <option value="nature">–ü—Ä–∏—Ä–æ–¥–∞</option>
            <option value="space">–ö–æ—Å–º–æ—Å</option>
        </select>
        <button onclick="testVirtualBackground()">–ü—Ä–∏–º–µ–Ω–∏—Ç—å —Ñ–æ–Ω</button>
        <div id="background-test-result" class="log">–†–µ–∑—É–ª—å—Ç–∞—Ç —Ç–µ—Å—Ç–∞ –ø–æ—è–≤–∏—Ç—Å—è –∑–¥–µ—Å—å...</div>
    </div>

    <div class="test-section">
        <h3>4. –¢–µ—Å—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–∫</h3>
        <button onclick="testSettingsSave()">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏</button>
        <button onclick="testSettingsLoad()">–ó–∞–≥—Ä—É–∑–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏</button>
        <div id="storage-test-result" class="log">–†–µ–∑—É–ª—å—Ç–∞—Ç —Ç–µ—Å—Ç–∞ –ø–æ—è–≤–∏—Ç—Å—è –∑–¥–µ—Å—å...</div>
    </div>

    <script>
        // –°–∏–º—É–ª—è—Ü–∏—è –º–µ—Ç–æ–¥–æ–≤ –∏–∑ WindowManager
        function switchSettingsTab(tabName) {
            console.log(`–ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –Ω–∞ –≤–∫–ª–∞–¥–∫—É: ${tabName}`);
            
            // –£–±–∏—Ä–∞–µ–º –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å —Å–æ –≤—Å–µ—Ö –≤–∫–ª–∞–¥–æ–∫
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            
            document.querySelectorAll('.tab-panel').forEach(panel => {
                panel.classList.remove('active');
            });
            
            // –ê–∫—Ç–∏–≤–∏—Ä—É–µ–º –Ω—É–∂–Ω—É—é –≤–∫–ª–∞–¥–∫—É
            const tabBtn = document.querySelector(`[data-tab="${tabName}"]`);
            const tabPanel = document.getElementById(`${tabName}-tab`);
            
            if (tabBtn) {
                tabBtn.classList.add('active');
                console.log(`–ö–Ω–æ–ø–∫–∞ –≤–∫–ª–∞–¥–∫–∏ ${tabName} –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–∞`);
            } else {
                console.warn(`–ö–Ω–æ–ø–∫–∞ –≤–∫–ª–∞–¥–∫–∏ ${tabName} –Ω–µ –Ω–∞–π–¥–µ–Ω–∞`);
            }
            
            if (tabPanel) {
                tabPanel.classList.add('active');
                console.log(`–ü–∞–Ω–µ–ª—å –≤–∫–ª–∞–¥–∫–∏ ${tabName} –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–∞`);
            } else {
                console.warn(`–ü–∞–Ω–µ–ª—å –≤–∫–ª–∞–¥–∫–∏ ${tabName} –Ω–µ –Ω–∞–π–¥–µ–Ω–∞`);
            }

            document.getElementById('tab-test-result').textContent = `‚úÖ –í–∫–ª–∞–¥–∫–∞ "${tabName}" —É—Å–ø–µ—à–Ω–æ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–∞`;
        }

        function applyUIScale(scale) {
            console.log(`–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –º–∞—Å—à—Ç–∞–±–∞: ${scale}`);
            
            // –£–±–∏—Ä–∞–µ–º –≤—Å–µ –∫–ª–∞—Å—Å—ã –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è
            document.body.classList.remove('ui-scale-80', 'ui-scale-100', 'ui-scale-120', 'ui-scale-140');
            
            // –ü—Ä–∏–º–µ–Ω—è–µ–º –Ω–æ–≤—ã–π –º–∞—Å—à—Ç–∞–±
            const scaleValue = parseFloat(scale);
            
            if (scaleValue === 0.8) {
                document.body.classList.add('ui-scale-80');
            } else if (scaleValue === 1.2) {
                document.body.classList.add('ui-scale-120');
            } else if (scaleValue === 1.4) {
                document.body.classList.add('ui-scale-140');
            } else {
                document.body.classList.add('ui-scale-100');
            }
            
            // –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π –º–µ—Ç–æ–¥ –¥–ª—è –±—Ä–∞—É–∑–µ—Ä–æ–≤, –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—â–∏—Ö zoom
            if (CSS.supports('zoom', '1')) {
                document.body.style.zoom = scale;
            }
            
            console.log(`–ü—Ä–∏–º–µ–Ω–µ–Ω –º–∞—Å—à—Ç–∞–±: ${scale}`);
            document.getElementById('scale-test-result').textContent = `‚úÖ –ú–∞—Å—à—Ç–∞–± ${Math.round(scaleValue * 100)}% —É—Å–ø–µ—à–Ω–æ –ø—Ä–∏–º–µ–Ω–µ–Ω`;
        }

        function applyVirtualBackground(backgroundType) {
            console.log('–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ —Ñ–æ–Ω–∞:', backgroundType);
            
            const testDiv = document.getElementById('background-test-result');
            testDiv.style.backgroundImage = '';
            testDiv.style.filter = '';
            
            switch (backgroundType) {
                case 'blur':
                    testDiv.style.filter = 'blur(5px)';
                    testDiv.textContent = '‚úÖ –†–∞–∑–º—ã—Ç–∏–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–æ';
                    break;
                    
                case 'office':
                    testDiv.style.backgroundImage = 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)';
                    testDiv.textContent = '‚úÖ –û—Ñ–∏—Å–Ω—ã–π —Ñ–æ–Ω –ø—Ä–∏–º–µ–Ω–µ–Ω';
                    break;
                    
                case 'nature':
                    testDiv.style.backgroundImage = 'linear-gradient(135deg, #a8edea 0%, #fed6e3 100%)';
                    testDiv.textContent = '‚úÖ –ü—Ä–∏—Ä–æ–¥–Ω—ã–π —Ñ–æ–Ω –ø—Ä–∏–º–µ–Ω–µ–Ω';
                    break;
                    
                case 'space':
                    testDiv.style.backgroundImage = 'linear-gradient(135deg, #000428 0%, #004e92 100%)';
                    testDiv.textContent = '‚úÖ –ö–æ—Å–º–∏—á–µ—Å–∫–∏–π —Ñ–æ–Ω –ø—Ä–∏–º–µ–Ω–µ–Ω';
                    break;
                    
                case 'none':
                default:
                    testDiv.textContent = '‚úÖ –§–æ–Ω —É–±—Ä–∞–Ω';
                    break;
            }
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ —Å–æ–±—ã—Ç–∏–π
        document.addEventListener('DOMContentLoaded', () => {
            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è –≤–∫–ª–∞–¥–æ–∫
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.addEventListener('click', () => {
                    const tabName = btn.dataset.tab;
                    if (tabName) {
                        switchSettingsTab(tabName);
                    }
                });
            });

            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è –º–∞—Å—à—Ç–∞–±–∞
            const uiScaleSelect = document.getElementById('uiScale');
            if (uiScaleSelect) {
                uiScaleSelect.addEventListener('change', (e) => {
                    applyUIScale(e.target.value);
                });
            }

            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ —Ñ–æ–Ω–∞
            const virtualBackgroundSelect = document.getElementById('virtualBackground');
            if (virtualBackgroundSelect) {
                virtualBackgroundSelect.addEventListener('change', (e) => {
                    applyVirtualBackground(e.target.value);
                });
            }

            console.log('‚úÖ –í—Å–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω—ã');
        });

        // –¢–µ—Å—Ç–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
        function testUIScale() {
            const scale = document.getElementById('uiScale').value;
            applyUIScale(scale);
        }

        function testVirtualBackground() {
            const background = document.getElementById('virtualBackground').value;
            applyVirtualBackground(background);
        }

        function testSettingsSave() {
            const testSettings = {
                videoQuality: '720p',
                frameRate: '30',
                noiseSuppression: true,
                echoCancellation: true,
                autoGainControl: true,
                soundVolume: '75',
                uiScale: '1.2',
                virtualBackground: 'blur'
            };
            
            localStorage.setItem('nearsap-settings', JSON.stringify(testSettings));
            document.getElementById('storage-test-result').textContent = '‚úÖ –¢–µ—Å—Ç–æ–≤—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –≤ localStorage';
        }

        function testSettingsLoad() {
            try {
                const saved = localStorage.getItem('nearsap-settings');
                if (saved) {
                    const settings = JSON.parse(saved);
                    document.getElementById('storage-test-result').textContent = `‚úÖ –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∑–∞–≥—Ä—É–∂–µ–Ω—ã: ${JSON.stringify(settings, null, 2)}`;
                } else {
                    document.getElementById('storage-test-result').textContent = '‚ö†Ô∏è –°–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã';
                }
            } catch (error) {
                document.getElementById('storage-test-result').textContent = `‚ùå –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –Ω–∞—Å—Ç—Ä–æ–µ–∫: ${error.message}`;
            }
        }
    </script>

    <style>
        .tab-btn {
            padding: 10px 15px;
            border: 1px solid #ccc;
            background: #f8f9fa;
            cursor: pointer;
            margin-right: 5px;
        }
        
        .tab-btn.active {
            background: #007bff;
            color: white;
            border-color: #007bff;
        }
        
        .tab-panel {
            display: none;
            padding: 20px;
            border: 1px solid #ccc;
            margin-top: 10px;
        }
        
        .tab-panel.active {
            display: block;
        }

        /* –ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è —Ç–µ—Å—Ç–∞ */
        body.ui-scale-80 { zoom: 0.8; }
        body.ui-scale-100 { zoom: 1.0; }
        body.ui-scale-120 { zoom: 1.2; }
        body.ui-scale-140 { zoom: 1.4; }
    </style>
</body>
</html>