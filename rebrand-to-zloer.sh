#!/bin/bash

echo "๐ฒ ะะตะฑัะตะฝะดะธะฝะณ ะฒ Zloer ั ะฝะพะฒัะผ ะผะฐัะบะพัะพะผ - Connect. Play. Zloer"
echo "=========================================================="

# ะัะพะฒะตััะตะผ ััะพ ะผั ะฒ ะฟัะฐะฒะธะปัะฝะพะน ะดะธัะตะบัะพัะธะธ
if [ ! -f "server.js" ]; then
    echo "โ ะัะธะฑะบะฐ: ัะฐะนะป server.js ะฝะต ะฝะฐะนะดะตะฝ. ะฃะฑะตะดะธัะตัั ััะพ ะฒั ะฒ ะดะธัะตะบัะพัะธะธ ะฟัะพะตะบัะฐ"
    exit 1
fi

echo "โน๏ธ ะััะฐะฝะพะฒะบะฐ ััะฐัะพะณะพ ะฟัะธะปะพะถะตะฝะธั..."
pm2 stop nearsnap 2>/dev/null || echo "ะัะธะปะพะถะตะฝะธะต nearsnap ะฝะต ะทะฐะฟััะตะฝะพ"
pm2 delete nearsnap 2>/dev/null || echo "ะัะธะปะพะถะตะฝะธะต nearsnap ะฝะต ะฝะฐะนะดะตะฝะพ ะฒ PM2"

echo "๐ ะะฐะฟััะบ ะฝะพะฒะพะณะพ ะฟัะธะปะพะถะตะฝะธั Zloer..."
pm2 start ecosystem.config.js

echo "๐พ ะกะพััะฐะฝะตะฝะธะต ะบะพะฝัะธะณััะฐัะธะธ PM2..."
pm2 save

echo "๐ ะกัะฐััั ะฟัะธะปะพะถะตะฝะธั:"
pm2 status

echo ""
echo "๐ ะะตะฑัะตะฝะดะธะฝะณ ะทะฐะฒะตััะตะฝ!"
echo "๐ Zloer ะดะพัััะฟะตะฝ ะฟะพ ะฐะดัะตัั: http://185.117.154.193:3000"
echo "๐ ะะพะณะธ: pm2 logs zloer"
echo ""
echo "โจ ะะทะผะตะฝะตะฝะธั:"
echo "  ๐ฎ ะะฐะทะฒะฐะฝะธะต: NearSnap โ Zloer"
echo "  ๐ฏ ะกะปะพะณะฐะฝ: Connect. Play. Zloer"
echo "  ๐ฒ ะะพะฒัะน ะผะฐัะบะพั: ะะฝัะตัะฐะบัะธะฒะฝัะน ะบะธะฑะตั-ะดัะฐะบะพะฝ"
echo "  ๐จ ะะพะฒัะน ะปะพะณะพัะธะฟ: ะกะธะฝะต-ัะธะพะปะตัะพะฒัะน ั ะดัะฐะบะพะฝะพะผ"
echo "  โ๏ธ PM2 ะฟัะพัะตัั: nearsnap โ zloer"
echo "  ๐ญ ะะฝะธะผะฐัะธะธ: ะะปะฐะฒะฐััะธะน ะผะฐัะบะพั ั ัะตะฐะบัะธัะผะธ"
echo ""
echo "๐ฒ ะัะพะฑะตะฝะฝะพััะธ ะผะฐัะบะพัะฐ:"
echo "  โข ะะปะธะบะฝะธัะต ะฟะพ ะดัะฐะบะพะฝั ะดะปั ะธะฝัะตัะฐะบัะธะฒะฝะพััะธ"
echo "  โข 10 ะบะปะธะบะพะฒ ะฐะบัะธะฒะธัััั ะปะตะณะตะฝะดะฐัะฝัะน ัะตะถะธะผ"
echo "  โข ะะฐัะบะพั ัะตะฐะณะธััะตั ะฝะฐ ัะพะฑััะธั ะฒ ัะฐัะต"
echo "  โข ะะฝะธะผะฐัะธะธ ะฐะดะฐะฟัะธัััััั ะบ ะฒัะฑัะฐะฝะฝะพะน ัะตะผะต"
echo ""
echo "ะัะต ััะฝะบัะธะธ ัะพััะฐะฝะตะฝั + ะฝะพะฒัะน ะธะฝัะตัะฐะบัะธะฒะฝัะน ะพะฟัั! ๐"